<nav class="navbar navbar-expand-lg navbar-light bg-white">
  <div class="container">
    <a class="navbar-brand d-flex gap-1" routerLink="/">
      <img src="/assets/logo.png" alt="Logo" width="24" height="24" class="d-inline-block">
      <span class="fw-semibold logo-title">RedSeam Clothing</span>
    </a>

    <div class="d-flex align-items-center">
      <div *ngIf="!authService.isAuthenticated" class="d-flex align-items-center">
        <a routerLink="/login" class="btn login-btn d-flex align-items-center">
          <img src="/assets/user.png" alt="User Icon" height="17" class="me-2">
          <span class="fw-medium">Log In</span>
        </a>
      </div>

      <div *ngIf="authService.isAuthenticated" class="d-flex align-items-center gap-3">
        <button class="btn position-relative" (click)="openCartPanel()">
          <img src="/assets/shopping-cart.png" alt="Cart Icon" height="24">
        </button>

        <div class="d-flex align-items-center position-relative">
          <img
            [src]="authService.currentUser?.user?.profile_photo || '/assets/user.png'"
            [alt]="authService.currentUser?.user?.name || 'User Avatar'"
            [ngClass]="authService.currentUser?.user?.profile_photo ? 'rounded-circle user-avatar' : 'user-avatar'"
            [width]="authService.currentUser?.user?.profile_photo ? '40' : '20'"
            [height]="authService.currentUser?.user?.profile_photo ? '40' : '20'"
            [style.object-fit]="authService.currentUser?.user?.profile_photo ? 'cover' : 'none'"
            style="cursor: pointer;"
            (click)="toggleUserMenu()">

          <div *ngIf="showUserMenu" class="user-dropdown">
            <div class="dropdown-item user-info">
              <div class="fw-semibold">{{ authService.currentUser?.user?.name }}</div>
              <div class="text-muted small">{{ authService.currentUser?.user?.email }}</div>
            </div>
            <div class="dropdown-divider"></div>
            <button class="dropdown-item logout-btn" (click)="onLogout()">
              <i class="bi bi-box-arrow-right me-2"></i>
              Logout
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</nav>
